<app-modal
  [isOpen]="isOpen"
  [modalTitle]="task.title"
  [confirmText]="'Edit'"
  [cancelText]="'Close'"
  [autoCloseOnConfirm]="false"
  (onCancel)="onClose()"
  (onConfirm)="onEdit()"
  (onCloseModal)="onClose()"
>
  <div class="task-header" modal-header>
    <h2 class="task-title">{{ task.title }}</h2>
    <div class="task-status" [ngClass]="getStatusClass()">
      {{ getStatusLabel() }}
    </div>
  </div>

  <div class="task-view">
    <div class="left-side">
      <div class="task-section">
        <div class="task-section-header">
          <h3>Description</h3>
        </div>
        <p class="task-description">{{ task.description || 'No description provided' }}</p>
      </div>
    </div>

    <div class="task-details right-side">
      @if (task.dueDate) {
      <div class="task-section data-section due-date-section">
        <div class="task-section-header">
          <h3>Due Date</h3>
        </div>
        <div class="task-section-content">
          <div class="task-due-date" [class.overdue]="isOverdue()">
            @if (isOverdue()) {
            <mat-icon class="icon overdue-icon" fontSet="material-icons-round">error</mat-icon>
            }
            {{ formatDate(task.dueDate) }}
            @if (isOverdue()) {
            <mat-icon class="icon overdue-icon" fontSet="material-icons-round">error</mat-icon>
            }
          </div>
        </div>
      </div>
      }

      <div class="task-section data-section priority-section">
        <div class="task-section-header">
          <h3>Priority</h3>
        </div>
        <div class="task-section-content">
          <div class="task-priority" [ngClass]="getPriorityClass()">
            <span class="priority-icon icon">{{ getPriorityIcon() }}</span>
            <span class="priority-text">{{ task.priority | titlecase }}</span>
          </div>
        </div>
      </div>

      <div class="blank-section">
        <span></span>
      </div>

      <div class="task-section data-section created-section">
        <div class="task-section-header">
          <h3>Created</h3>
        </div>
        <div class="task-section-content">
          <div class="task-created">
            {{ formatCreatedDate(task.createdAt) }}
          </div>
        </div>
      </div>
    </div>
  </div>
</app-modal>
